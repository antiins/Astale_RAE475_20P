anta@anta-VirtualBox:~$ sudo apt update
[sudo] password for anta: 
Get:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88,7 kB]
Hit:2 http://lv.archive.ubuntu.com/ubuntu bionic InRelease                    
Get:3 http://lv.archive.ubuntu.com/ubuntu bionic-updates InRelease [88,7 kB]  
Get:4 http://lv.archive.ubuntu.com/ubuntu bionic-backports InRelease [74,6 kB]
Get:5 http://lv.archive.ubuntu.com/ubuntu bionic-updates/main amd64 DEP-11 Metadata [303 kB]
Get:6 http://lv.archive.ubuntu.com/ubuntu bionic-updates/universe amd64 DEP-11 Metadata [273 kB]
Get:7 http://lv.archive.ubuntu.com/ubuntu bionic-updates/universe DEP-11 64x64 Icons [458 kB]
Get:8 http://security.ubuntu.com/ubuntu bionic-security/main amd64 DEP-11 Metadata [40,6 kB]
Get:9 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 DEP-11 Metadata [42,0 kB]
Get:10 http://lv.archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 DEP-11 Metadata [2 468 B]
Get:11 http://lv.archive.ubuntu.com/ubuntu bionic-backports/universe amd64 DEP-11 Metadata [7 968 B]
Get:12 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 DEP-11 Metadata [2 464 B]
Fetched 1 382 kB in 1s (1 125 kB/s)                
Reading package lists... Done
Building dependency tree       
Reading state information... Done
11 packages can be upgraded. Run 'apt list --upgradable' to see them.
anta@anta-VirtualBox:~$ sudo apt install apache2
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  efibootmgr libfwup1 libwayland-egl1-mesa
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  apache2-bin apache2-data apache2-utils libapr1 libaprutil1
  libaprutil1-dbd-sqlite3 libaprutil1-ldap
Suggested packages:
  apache2-doc apache2-suexec-pristine | apache2-suexec-custom
The following NEW packages will be installed:
  apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1
  libaprutil1-dbd-sqlite3 libaprutil1-ldap
0 upgraded, 8 newly installed, 0 to remove and 11 not upgraded.
Need to get 1 604 kB of archives.
After this operation, 6 497 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://lv.archive.ubuntu.com/ubuntu bionic/main amd64 libapr1 amd64 1.6.3-2 [90,9 kB]
Get:2 http://lv.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1 amd64 1.6.1-2 [84,4 kB]
Get:3 http://lv.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-2 [10,6 kB]
Get:4 http://lv.archive.ubuntu.com/ubuntu bionic/main amd64 libaprutil1-ldap amd64 1.6.1-2 [8 764 B]
Get:5 http://lv.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-bin amd64 2.4.29-1ubuntu4.13 [1 070 kB]
Get:6 http://lv.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-utils amd64 2.4.29-1ubuntu4.13 [83,8 kB]
Get:7 http://lv.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2-data all 2.4.29-1ubuntu4.13 [160 kB]
Get:8 http://lv.archive.ubuntu.com/ubuntu bionic-updates/main amd64 apache2 amd64 2.4.29-1ubuntu4.13 [95,1 kB]
Fetched 1 604 kB in 1s (2 979 kB/s) 
Selecting previously unselected package libapr1:amd64.
(Reading database ... 171805 files and directories currently installed.)
Preparing to unpack .../0-libapr1_1.6.3-2_amd64.deb ...
Unpacking libapr1:amd64 (1.6.3-2) ...
Selecting previously unselected package libaprutil1:amd64.
Preparing to unpack .../1-libaprutil1_1.6.1-2_amd64.deb ...
Unpacking libaprutil1:amd64 (1.6.1-2) ...
Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.
Preparing to unpack .../2-libaprutil1-dbd-sqlite3_1.6.1-2_amd64.deb ...
Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-2) ...
Selecting previously unselected package libaprutil1-ldap:amd64.
Preparing to unpack .../3-libaprutil1-ldap_1.6.1-2_amd64.deb ...
Unpacking libaprutil1-ldap:amd64 (1.6.1-2) ...
Selecting previously unselected package apache2-bin.
Preparing to unpack .../4-apache2-bin_2.4.29-1ubuntu4.13_amd64.deb ...
Unpacking apache2-bin (2.4.29-1ubuntu4.13) ...
Selecting previously unselected package apache2-utils.
Preparing to unpack .../5-apache2-utils_2.4.29-1ubuntu4.13_amd64.deb ...
Unpacking apache2-utils (2.4.29-1ubuntu4.13) ...
Selecting previously unselected package apache2-data.
Preparing to unpack .../6-apache2-data_2.4.29-1ubuntu4.13_all.deb ...
Unpacking apache2-data (2.4.29-1ubuntu4.13) ...
Selecting previously unselected package apache2.
Preparing to unpack .../7-apache2_2.4.29-1ubuntu4.13_amd64.deb ...
Unpacking apache2 (2.4.29-1ubuntu4.13) ...
Setting up libapr1:amd64 (1.6.3-2) ...
Setting up apache2-data (2.4.29-1ubuntu4.13) ...
Setting up libaprutil1:amd64 (1.6.1-2) ...
Setting up libaprutil1-ldap:amd64 (1.6.1-2) ...
Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-2) ...
Setting up apache2-utils (2.4.29-1ubuntu4.13) ...
Setting up apache2-bin (2.4.29-1ubuntu4.13) ...
Setting up apache2 (2.4.29-1ubuntu4.13) ...
Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling module reqtimeout.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
Created symlink /etc/systemd/system/multi-user.target.wants/apache2.service → /lib/systemd/system/apache2.service.
Created symlink /etc/systemd/system/multi-user.target.wants/apache-htcacheclean.service → /lib/systemd/system/apache-htcacheclean.service.
Processing triggers for libc-bin (2.27-3ubuntu1) ...
Processing triggers for systemd (237-3ubuntu10.40) ...
Processing triggers for man-db (2.8.3-2ubuntu0.1) ...
Processing triggers for ufw (0.36-0ubuntu0.18.04.1) ...
Processing triggers for ureadahead (0.100.0-21) ...
anta@anta-VirtualBox:~$ sudo ufw app list
Available applications:
  Apache
  Apache Full
  Apache Secure
  CUPS
anta@anta-VirtualBox:~$ sudo ufw allow 'Apache'
Rules updated
Rules updated (v6)
anta@anta-VirtualBox:~$ sudo ufw status
Status: inactive
anta@anta-VirtualBox:~$ sudo ufw allow 'Apache Secure'
Rules updated
Rules updated (v6)
anta@anta-VirtualBox:~$ sudo ufw status
Status: inactive
anta@anta-VirtualBox:~$ sudo ufw enable
Firewall is active and enabled on system startup
anta@anta-VirtualBox:~$ sudo ufw allow 'Apache Secure'
Skipping adding existing rule
Skipping adding existing rule (v6)
anta@anta-VirtualBox:~$ sudo ufw status
Status: active

To                         Action      From
--                         ------      ----
Apache                     ALLOW       Anywhere                  
Apache Secure              ALLOW       Anywhere                  
Apache (v6)                ALLOW       Anywhere (v6)             
Apache Secure (v6)         ALLOW       Anywhere (v6)             

anta@anta-VirtualBox:~$ sudo systemctl status apache2
● apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset:
  Drop-In: /lib/systemd/system/apache2.service.d
           └─apache2-systemd.conf
   Active: active (running) since Thu 2020-05-14 15:24:28 EEST; 3min 42s ago
 Main PID: 17411 (apache2)
    Tasks: 55 (limit: 4915)
   CGroup: /system.slice/apache2.service
           ├─17411 /usr/sbin/apache2 -k start
           ├─17412 /usr/sbin/apache2 -k start
           └─17413 /usr/sbin/apache2 -k start

mai 14 15:24:28 anta-VirtualBox systemd[1]: Starting The Apache HTTP Server...
mai 14 15:24:28 anta-VirtualBox apachectl[17400]: AH00558: apache2: Could not r
mai 14 15:24:28 anta-VirtualBox systemd[1]: Started The Apache HTTP Server.

[7]+  Stopped                 sudo systemctl status apache2
anta@anta-VirtualBox:~$ hostname -I
10.0.2.15 
anta@anta-VirtualBox:~$ curl -4 icanhazip.com

Command 'curl' not found, but can be installed with:

sudo apt install curl

anta@anta-VirtualBox:~$ sudo mkdir /var/www/curl
anta@anta-VirtualBox:~$ sudo chown -R $USER:$USER /var/www/curl
anta@anta-VirtualBox:~$ sudo chmod -R 755 /var/www/curl
anta@anta-VirtualBox:~$ nano /var/www/curl/index.html
anta@anta-VirtualBox:~$ sudo nano /etc/apache2/sites-available/curl.conf
anta@anta-VirtualBox:~$ sudo a2ensite curl.conf
Enabling site curl.
To activate the new configuration, you need to run:
  systemctl reload apache2
anta@anta-VirtualBox:~$ sudo systemctl reload apache2
Job for apache2.service failed because the control process exited with error code.
See "systemctl status apache2.service" and "journalctl -xe" for details.
anta@anta-VirtualBox:~$ sudo a2dissite 000-default.conf
Site 000-default disabled.
To activate the new configuration, you need to run:
  systemctl reload apache2
anta@anta-VirtualBox:~$ sudo apache2ctl configtest
AH00526: Syntax error on line 2 of /etc/apache2/sites-enabled/curl.conf:
Invalid command 'ServerAmin', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed.
The Apache error log may have more information.
anta@anta-VirtualBox:~$ sudo systemctl restart apache2
Job for apache2.service failed because the control process exited with error code.
See "systemctl status apache2.service" and "journalctl -xe" for details.
anta@anta-VirtualBox:~$ sudo apache2ctl configtest
AH00526: Syntax error on line 2 of /etc/apache2/sites-enabled/curl.conf:
Invalid command 'ServerAmin', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed.
The Apache error log may have more information.
anta@anta-VirtualBox:~$ echo "ServerName curl.com" | sudo tee /etc/apache2/conf-available/servername.conf
ServerName curl.com
anta@anta-VirtualBox:~$ sudo nano /etc/apache2/sites-available/curl.conf
anta@anta-VirtualBox:~$ sudo a2ensite curl.conf
Site curl already enabled
anta@anta-VirtualBox:~$ sudo a2dissite 000-default.conf
Site 000-default already disabled
anta@anta-VirtualBox:~$ sudo apache2ctl configtest
AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1. Set the 'ServerName' directive globally to suppress this message
Syntax OK
anta@anta-VirtualBox:~$ echo "ServerName curl.com" | sudo tee /etc/apache2/conf-available/servername.conf
ServerName curl.com
anta@anta-VirtualBox:~$ sudo apache2ctl configtest
AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1. Set the 'ServerName' directive globally to suppress this message
Syntax OK

